(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7a77"],{7877:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"body"},[e("ParabodyRight",{attrs:{views:t.views,view:t.view,viewed:t.viewed,stacked:!0},on:{open:t.open,goto:t.goto}}),e("div",{staticClass:"body"},[e("div",{staticClass:"body"},[e("div",{staticClass:"subbody"},[e("div",{staticClass:"bodyer thin stack"},[e("div",{staticClass:"horzer dim thin"},[e("div",{staticClass:"lefter"},[e("span",[t._v(t._s(t.status||t.$route.path))])]),e("div",{staticClass:"rghter"},[e("a",{class:t.classFilter("created"),on:{click:function(s){return t.toggleFilter("created")}}},[t._v(" Created")]),t._v(" • "),e("a",{class:t.classFilter("updated"),on:{click:function(s){return t.toggleFilter("updated")}}},[t._v(" Updated")]),t._v(" • "),e("span",[t._v(" "+t._s(t.majigs.length||0)+" ")])])])]),t.majigs.length?t._e():e("div",{staticClass:"bodyer thin stack"},[e("p",[t._v("404 Not Found")])]),t._l(t.majigs,(function(s){return e("div",{key:s.id,staticClass:"bodyer thin stack"},[e("div",{domProps:{innerHTML:t._s(t.marked(s.markdown))}}),t._m(0,!0),e("div",{staticClass:"substack horzer dim"},[e("div",{staticClass:"cntrer thin"},[e("span",[t._v(" "+t._s(t._f("datetime")(s.created))+" • "+t._s(t._f("datetime")(s.updated))+" ")]),e("br"),t.signed?[e("a",{on:{click:function(e){return t.open("editor",s)}}},[t._v(" edit ")]),t._v(" • "),e("a",{on:{click:function(e){return t.open("configer",s)}}},[t._v(" meta ")]),t._v(" • ")]:t._e(),e("a",{on:{click:function(e){return t.gotoMajig(s)}}},[t._v(" goto ")]),t._v(" • "),e("span",[t._v(" "+t._s(t._f("datetime")(s.published))+" ")])],2)])])})),e("div",{staticClass:"bodyer thin stack"})],2)])])],1)},a=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"supstack"},[e("br")])}],r=e("e0c1"),n=e.n(r),d=e("2b91"),o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"body"},[e("div",{staticClass:"subbody"},[e("div",{staticClass:"bodyer para"},[e("h2",[t._v("Edit Majig")]),e("form",{on:{submit:function(s){return s.preventDefault(),t.update(s)}}},[e("input",{attrs:{type:"submit",value:"Update"}})]),e("h2",[t._v("Markdown")]),e("form",{staticClass:"editor",on:{submit:function(s){return s.preventDefault(),t.update(s)}}},[e("pre",[e("span",[t._v("\n        "+t._s(t.majig.markdown)+"\n      ")]),e("br")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.majig.markdown,expression:"majig.markdown"}],attrs:{placeholder:"markdown"},domProps:{value:t.majig.markdown},on:{input:function(s){s.target.composing||t.$set(t.majig,"markdown",s.target.value)}}})])])])])},l=[],c={components:{},props:{viewed:{type:Object,required:!0}},data(){return{}},computed:{majig(){return this.viewed}},methods:{update(){this.$emit("notify","updating"),this.$store.dispatch("majigs/update",{majigId:this.majig.id,markdown:this.majig.markdown}).then(t=>{this.$emit("open",!1)}).catch(t=>{this.$emit("notify",t[0].title)})}}},u=c,h=e("2877"),m=Object(h["a"])(u,o,l,!1,null,null,null),g=m.exports,p=e("10a0");const v=new n.a.Renderer,f={link:v.link.bind(v)};v.link=(t,s,e)=>("/"===t[0]?t="#"+t:"#"!==t[0]&&(t="#/"+t),f.link(t,s,e));var w={components:{ParabodyRight:d["a"]},filters:{datetime:t=>{if(!t)return"000-00-00 00:00:00";const s=new Date(t);return s.toLocaleString("sv-SE")}},props:{flags:{type:Array,required:!1}},data(){return{status:"",views:{editor:g,configer:p["a"]},view:"",viewed:null}},created(){this.loadMajigs()},watch:{$route:"loadMajigs",signed:"loadMajigs"},computed:{signed(){return this.$store.getters["token/signed"]},filter(){return this.$store.state.majigs.filter},majigs(){return this.$store.state.majigs.all||[]}},methods:{marked(t){return n()(t||"404 Not Found",{renderer:v})},goto(t){this.open(!1),this.$router.push(t).catch(t=>{})},gotoMajig(t){t.path?this.$router.push({path:t.path}):this.$router.push({name:"supmajig",params:{majigId:t.id}})},open(t,s){!1===t||t===this.view&&s===this.viewed?(this.view="",this.viewed=null):t!==this.view?(this.view=t,this.viewed=s):this.viewed=s},toggleFilter(t){this.status="sorting",this.filter==t?this.$store.dispatch("majigs/load",{filter:"-"+t,flags:this.flags}).then(()=>{this.status=""}).catch(t=>{this.status=t[0].title}):this.$store.dispatch("majigs/load",{filter:t,flags:this.flags}).then(()=>{this.status=""}).catch(t=>{this.status=t[0].title})},classFilter(t){return this.filter==t?"descend":this.filter=="-"+t?"ascend":""},loadMajigs(){this.open(!1),this.status="loading",this.$store.dispatch("majigs/load",{filter:this.filter,flags:this.flags}).then(()=>{this.status=""}).catch(t=>{this.status=t[0].title})},editMajig(t){this.status="updating",this.$store.dispatch("majigs/update",{majigId:t.id,markdown:t.markdown}).then(()=>{this.status=""}).catch(t=>{this.status=t[0].title})},removeMajig(t){this.status="removing",this.$store.dispatch("majigs/remove",{majigId:t.id}).then(()=>{this.status=""}).catch(t=>{this.status=t[0].title})}}},_=w,j=Object(h["a"])(_,i,a,!1,null,null,null);s["default"]=j.exports}}]);
//# sourceMappingURL=chunk-2d0d7a77.4dd02385.js.map