{"version":3,"sources":["webpack:///./views/utils/search.vue?ed98","webpack:///views/utils/search.vue","webpack:///./views/utils/search.vue?b91b","webpack:///./views/utils/search.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","$event","preventDefault","search","directives","name","rawName","value","expression","attrs","domProps","target","composing","terms","_s","majigs","length","_e","_l","majig","goto","_f","markdown","termed","tags","join","path","staticRenderFns","filters","previewed","term","index","indexOf","offset","Math","floor","substring","methods","$store","dispatch","status","then","$router","push","catch","error","params","majigId","id","errors","title","component"],"mappings":"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","file":"js/chunk-2d0c1b87-legacy.8a060af9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"body\"},[_c('div',{staticClass:\"subbody\"},[_c('div',{staticClass:\"bodyer para\"},[_c('h1',[_vm._v(\"Search\")]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.search()}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.terms),expression:\"terms\"}],attrs:{\"type\":\"text\",\"placeholder\":\"terms && tags\",\"autocorrect\":\"off\",\"autocapitalize\":\"none\"},domProps:{\"value\":(_vm.terms)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.terms=$event.target.value}}}),_c('input',{attrs:{\"type\":\"submit\",\"value\":\"Search\"}})]),_c('h2',[_vm._v(\"Results \"),_c('span',[_vm._v(_vm._s(_vm.majigs.length))])]),_c('ul',[(!_vm.majigs.length)?_c('li',[_c('div',[_vm._v(\"no results\")])]):_vm._e(),_vm._l((_vm.majigs),function(majig){return _c('li',[_c('a',{on:{\"click\":function($event){return _vm.goto(majig)}}},[_c('span',[_vm._v(\" \"+_vm._s(_vm._f(\"previewed\")(majig.markdown,_vm.termed))+\" \")]),_c('h5',[_vm._v(_vm._s(majig.tags.join(' ') || majig.path))])])])})],2)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- Copyright (C) 2020 BenVacha/SoloMajig -->\n\n<template>\n<div class=\"body\">\n\n  <div class=\"subbody\">\n  <div class=\"bodyer para\">\n    <h1>Search</h1>\n    <form @submit.prevent=\"search()\">\n      <input type=\"text\"\n        v-model=\"terms\"\n        placeholder=\"terms && tags\"\n        autocorrect=\"off\"\n        autocapitalize=\"none\"\n      />\n      <input type=\"submit\"\n        value=\"Search\" />\n    </form>\n    <h2>Results\n      <span>{{majigs.length}}</span>\n    </h2>\n    <ul>\n      <li v-if=\"!majigs.length\">\n        <div>no results</div>\n      </li>\n      <li v-for=\"majig in majigs\">\n        <a @click=\"goto(majig)\">\n          <span>\n            {{majig.markdown\n              | previewed(termed)}}\n          </span>\n          <h5>{{majig.tags.join(' ')\n            || majig.path}}</h5>\n        </a>\n      </li>\n    </ul>\n  </div>\n  </div>\n\n</div>\n</template>\n\n<!-- -->\n\n<script>\nexport default {\n  filters: {\n    previewed: (value, term) => {\n      const length = 90;\n      const index = value.indexOf(term);\n      let offset = length - term.length;\n      offset = Math.floor(offset / 2);\n      return value.substring(index - offset,\n        index + term.length + offset);\n    },\n  },\n  data () {\n    return {\n      terms: '',\n      termed: '',\n      majigs: [],\n    };\n  },\n  methods: {\n    goto (majig) {\n      this.$store.dispatch(\n        'utils/notify', {\n        status: 'going'\n      }).then(() => {\n        if(!majig.path) return;\n        return this.$router.push(\n          majig.path\n        ).catch(error => {});\n      }).then(() => {\n        if(majig.path) return;\n        this.$router.push({\n          name: 'supmajig',\n          params: {\n            majigId: majig.id\n          }\n        }).catch(() => {});\n      }).then(() => {\n        return this.$store.dispatch(\n          'utils/stash', {});\n      });\n    },\n    search () {\n      this.$store.dispatch(\n        'utils/notify', {\n        status: 'searching',\n      }).then(() => {\n        return this.$store.dispatch(\n          'majigs/search', {\n          terms: this.terms,\n        }).catch((errors) => {\n          throw errors[0];\n        });\n      }).then((majigs) => {\n        this.termed = this.terms;\n        this.majigs = majigs;\n        return this.$store.dispatch(\n          'utils/notify', {\n          status: '',\n        });\n      }).catch(error => {\n        this.$store.dispatch(\n          'utils/notify', {\n          status: error.title\n        });\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=8b1013ba&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}