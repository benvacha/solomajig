(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e4aea"],{"90eb":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"body"},[i("ParabodyRight",{attrs:{views:t.views,view:t.view,viewed:t.viewed},on:{open:t.open,goto:t.goto}}),i("div",{staticClass:"body"},[i("div",{staticClass:"body"},[i("div",{staticClass:"subbody"},[i("div",{staticClass:"bodyer thin stack"},[i("div",{staticClass:"horzer dim thin"},[i("div",{staticClass:"lefter togler10"},[t._v(" "+t._s(t.status||t.$route.path)+" ")]),t.signed?t._e():i("div",{staticClass:"rghter togler10"},[i("a",{on:{click:function(e){return t.open("sourcer",t.majig)}}},[t._v(" Source")]),t._v(" • "),i("a",{on:{click:function(e){return t.open("abouter",t.majig)}}},[t._v(" Meta")])]),t.signed?i("div",{staticClass:"rghter togler10"},[t.isMode("show")?[i("a",{on:{click:function(e){return t.toMode("edit")}}},[t._v(" Edit")]),t._v(" • ")]:t._e(),t.isMode("edit")?[i("a",{on:{click:function(e){return t.toMode("proof")}}},[t._v(" Proof")]),t._v(" • "),i("a",{on:{click:function(e){return t.toMode("cancel")}}},[t._v(" Cancel")]),t._v(" • "),i("a",{on:{click:function(e){return t.toMode("save")}}},[t._v(" Save")]),t._v(" • ")]:t._e(),t.isMode("proof")?[i("a",{on:{click:function(e){return t.toMode("edit")}}},[t._v(" Edit")]),t._v(" • "),i("a",{on:{click:function(e){return t.toMode("cancel")}}},[t._v(" Cancel")]),t._v(" • "),i("a",{on:{click:function(e){return t.toMode("save")}}},[t._v(" Save")]),t._v(" • ")]:t._e(),i("a",{on:{click:function(e){return t.open("configer",t.majig)}}},[t._v(" Meta")])],2):t._e(),i("div",{staticClass:"cntrer togler01"},[t._v(" "+t._s(t.status||t.$route.path)+" ")]),t.signed?i("div",{staticClass:"cntrer togler01"},[t.isMode("show")?[i("a",{on:{click:function(e){return t.toMode("edit")}}},[t._v(" Edit")]),t._v(" • ")]:t._e(),t.isMode("edit")?[i("a",{on:{click:function(e){return t.toMode("proof")}}},[t._v(" Proof")]),t._v(" • "),i("a",{on:{click:function(e){return t.toMode("cancel")}}},[t._v(" Cancel")]),t._v(" • "),i("a",{on:{click:function(e){return t.toMode("save")}}},[t._v(" Save")]),t._v(" • ")]:t._e(),t.isMode("proof")?[i("a",{on:{click:function(e){return t.toMode("edit")}}},[t._v(" Edit")]),t._v(" • "),i("a",{on:{click:function(e){return t.toMode("cancel")}}},[t._v(" Cancel")]),t._v(" • "),i("a",{on:{click:function(e){return t.toMode("save")}}},[t._v(" Save")]),t._v(" • ")]:t._e(),i("a",{on:{click:function(e){return t.open("configer",t.majig)}}},[t._v(" Meta")])],2):t._e()])]),i("div",{staticClass:"bodyer thin stack"},[t.isMode("show")||t.isMode("proof")?i("div",{domProps:{innerHTML:t._s(t.markeddown)}}):t._e(),t.isMode("edit")?i("form",{staticClass:"editor",on:{submit:function(t){t.preventDefault()}}},[i("pre",[i("span",[t._v("\n        "+t._s(t.markdown)+"\n      ")]),i("br")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.markdown,expression:"markdown"}],attrs:{placeholder:"markdown"},domProps:{value:t.markdown},on:{input:function(e){e.target.composing||(t.markdown=e.target.value)}}})]):t._e()]),i("div",{staticClass:"bodyer thin stack"},[i("div",{staticClass:"horzer dim"},[i("div",{staticClass:"lefter thin"},[t._v(" U • "+t._s(t._f("datetime")(t.majig.updated))+" ")]),i("div",{staticClass:"rghter thin"},[t._v(" "+t._s(t._f("datetime")(t.majig.published))+" • P ")])])])])])])],1)},s=[],o=i("e0c1"),n=i.n(o),d=i("2b91"),r=i("624f"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"body"},[i("div",{staticClass:"subbody"},[i("div",{staticClass:"bodyer para"},[i("h2",[t._v("About Majig")]),i("ul",[i("li",[i("div",[t._v(" published: "),i("b"),i("span",[t._v(" "+t._s(t._f("datetime")(t.viewed.published))+" ")])])]),i("li",[i("div",[t._v(" updated: "),i("b"),i("span",[t._v(" "+t._s(t._f("datetime")(t.viewed.updated))+" ")])])]),i("li",[i("div",[t._v(" created: "),i("b"),i("span",[t._v(" "+t._s(t._f("datetime")(t.viewed.created))+" ")])])])]),t.viewed.published?t._e():i("form",{on:{submit:function(e){return e.preventDefault(),t.publish(e)}}},[i("input",{attrs:{type:"submit",disabled:!t.viewed.id,value:"Publish"}})]),t.viewed.published?i("form",{on:{submit:function(e){return e.preventDefault(),t.unpublish(e)}}},[i("input",{attrs:{type:"submit",disabled:!t.viewed.id,value:"UnPublish"}})]):t._e(),i("h2",[t._v("Tag Majig")]),i("form",{on:{submit:function(e){return e.preventDefault(),t.retag(e)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.viewed.tags,expression:"viewed.tags"}],attrs:{type:"text",placeholder:"tags"},domProps:{value:t.viewed.tags},on:{input:function(e){e.target.composing||t.$set(t.viewed,"tags",e.target.value)}}}),i("input",{attrs:{type:"submit",disabled:!t.viewed.id,value:"ReTag"}})]),i("h6"),i("h2",[t._v("Move Majig")]),i("form",{on:{submit:function(e){return e.preventDefault(),t.move(e)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.viewed.path,expression:"viewed.path"}],attrs:{type:"text",placeholder:"/path"},domProps:{value:t.viewed.path},on:{input:function(e){e.target.composing||t.$set(t.viewed,"path",e.target.value)}}}),i("input",{attrs:{type:"submit",disabled:!t.viewed.id,value:"Move"}})]),i("h2",[t._v("Remove Majig")]),i("form",{on:{submit:function(e){return e.preventDefault(),t.remove(e)}}},[i("input",{attrs:{type:"submit",disabled:!t.viewed.id,value:"Remove"}})])])])])},h=[],c={filters:{datetime:t=>{if(!t)return"000-00-00 00:00:00";const e=new Date(t);return e.toLocaleString("sv-SE")}},props:{viewed:{type:Object,required:!0}},methods:{move(){return this.$emit("notify","moving"),this.$store.dispatch("majig/update",{majigId:this.viewed.id,path:this.viewed.path||!1}).then(t=>{this.$emit("open",!1),this.$router.push(t.path||"/").catch(t=>{})}).catch(t=>{this.$emit("notify",t[0].title)})},retag(){return this.$emit("notify","tagging"),this.$store.dispatch("majig/update",{majigId:this.viewed.id,tags:this.viewed.tags}).then(()=>{this.stacked?this.$emit("open",!1):this.$emit("notify","")}).catch(t=>{this.$emit("notify",t[0].title)})},publish(){this.$emit("notify","publishing"),this.$store.dispatch("majig/update",{majigId:this.viewed.id,published:new Date}).then(()=>{this.stacked?this.$emit("open",!1):this.$emit("notify","")}).catch(t=>{this.$emit("notify",t[0].title)})},unpublish(){this.$emit("notify","unpublishing"),this.$store.dispatch("majig/update",{majigId:this.viewed.id,published:!1}).then(()=>{this.stacked?this.$emit("open",!1):this.$emit("notify","")}).catch(t=>{this.$emit("notify",t[0].title)})},remove(){this.$emit("notify","removing"),this.$store.dispatch("majig/remove",{majigId:this.viewed.id}).then(()=>{this.$emit("open",!1)}).catch(t=>{this.$emit("notify",t[0].title)})}}},v=c,l=i("2877"),m=Object(l["a"])(v,u,h,!1,null,null,null),p=m.exports,g=i("c71a");const w=new n.a.Renderer,f={link:w.link.bind(w)};w.link=(t,e,i)=>("/"===t[0]?t="#"+t:"#"!==t[0]&&(t="#/"+t),f.link(t,e,i));var _={components:{ParabodyRight:d["a"]},filters:{datetime:t=>{if(!t)return"000-00-00 00:00:00";const e=new Date(t);return e.toLocaleString("sv-SE")}},props:{majigId:{type:String,required:!1}},data(){return{mode:"show",status:"",markdown:"",views:{abouter:r["a"],configer:p,sourcer:g["a"]},view:"",viewed:null}},created(){this.loadMajig()},watch:{$route:"loadMajig",signed:"loadMajig",majig:"loadViewed"},computed:{signed(){return this.$store.getters["token/signed"]},majig(){const t=this.$store.state.majig.all;return this.majigId?t[this.majigId]||{}:t[this.$route.path]||{}},markeddown(){return n()(this.markdown||"404 Not Found",{renderer:w})}},methods:{goto(t){this.open(!1),this.$router.push(t).catch(t=>{})},open(t,e){!1===t||t===this.view&&e===this.viewed?(this.view="",this.viewed=null):t!==this.view?(this.view=t,this.viewed=e):this.viewed=e},isMode(t){return this.mode===t},toMode(t){switch(t){case"cancel":this.markdown=this.majig.markdown||"",this.mode="show";break;case"save":this.saveMajig().then(()=>{this.mode="show"});break;default:this.mode=t;break}},loadViewed(){this.viewed=this.majig,this.markdown=this.majig.markdown},loadMajig(){return this.status="loading",this.open(!1),this.$store.dispatch("majig/load",{majigId:this.majigId,path:this.$route.path}).then(t=>{this.status=""}).catch(t=>{404===t[0].status?this.status="":this.status=t[0].title})},addMajig(){return this.status="adding",this.$store.dispatch("majig/add",{path:this.$route.path,markdown:this.markdown}).then(t=>{this.status=""}).catch(t=>{this.status=t[0].title})},updateMajig(){return this.status="updating",this.$store.dispatch("majig/update",{majigId:this.majig.id,markdown:this.markdown}).then(t=>{this.status=""}).catch(t=>{this.status=t[0].title})},saveMajig(){return this.status="saving",this.majig.id?this.updateMajig():this.addMajig()}}},b=_,k=Object(l["a"])(b,a,s,!1,null,null,null);e["default"]=k.exports}}]);
//# sourceMappingURL=chunk-2d0e4aea-legacy.47655194.js.map