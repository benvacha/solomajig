{"version":3,"sources":["webpack:///./views/majigs.vue?8d50","webpack:///views/majigs.vue","webpack:///./views/majigs.vue?e0f8","webpack:///./views/majigs.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","views","view","viewed","on","open","goto","_v","_s","status","$route","path","class","classFilter","$event","toggleFilter","count","majigs","length","_e","_l","majig","key","id","domProps","marked","markdown","_m","_f","updated","published","tags","gotoMajig","staticStyle","page","pageLink","staticRenderFns","Renderer","Renderers","link","bind","href","title","text","components","ParabodyRight","filters","datetime","value","when","Date","toLocaleString","props","flags","type","Array","required","Number","default","abouter","sourcer","limit","skip","loadMajigs","subbody","$el","querySelector","scrollTop","watch","computed","$store","getters","state","filter","pages","i","push","all","methods","join","renderer","$router","catch","err","name","params","majigId","dispatch","then","errors","component"],"mappings":"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","file":"js/chunk-2d0d7a77.884b998e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"body\"},[_c('ParabodyRight',{attrs:{\"views\":_vm.views,\"view\":_vm.view,\"viewed\":_vm.viewed},on:{\"open\":_vm.open,\"goto\":_vm.goto}}),_c('div',{staticClass:\"body\"},[_c('div',{staticClass:\"body\"},[_c('div',{staticClass:\"subbody\",attrs:{\"id\":\"subbody\"}},[_c('div',{staticClass:\"bodyer thin stack\"},[_c('div',{staticClass:\"horzer dim thin\"},[_c('div',{staticClass:\"lefter\"},[_c('span',[_vm._v(_vm._s(_vm.status || _vm.$route.path))])]),_c('div',{staticClass:\"rghter\"},[_c('a',{class:_vm.classFilter('published'),on:{\"click\":function($event){return _vm.toggleFilter('published')}}},[_vm._v(\" Published\")]),_vm._v(\" • \"),_c('a',{class:_vm.classFilter('updated'),on:{\"click\":function($event){return _vm.toggleFilter('updated')}}},[_vm._v(\" Updated\")]),_vm._v(\" • \"),_c('span',[_vm._v(\" \"+_vm._s(_vm.count || 0)+\" \")])])])]),(!_vm.majigs.length)?_c('div',{staticClass:\"bodyer thin stack\"},[_c('p',[_vm._v(\"404 Not Found\")])]):_vm._e(),_vm._l((_vm.majigs),function(majig){return _c('div',{key:majig.id,staticClass:\"bodyer thin stack\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.marked(majig.markdown))}}),_vm._m(0,true),_c('div',{staticClass:\"substack horzer dim\"},[_c('div',{staticClass:\"lefter thin\"},[_c('span',[_vm._v(\" U • \"+_vm._s(_vm._f(\"datetime\")(majig.updated))+\" \")]),_c('br'),_c('span',[_vm._v(\" P • \"+_vm._s(_vm._f(\"datetime\")(majig.published))+\" \")])]),_c('div',{staticClass:\"rghter thin\"},[_c('span',[_vm._v(\" \"+_vm._s(majig.tags)+\" \")]),_c('br'),_c('a',{on:{\"click\":function($event){return _vm.gotoMajig(majig)}}},[_vm._v(\" GoTo \")]),_vm._v(\" • \"),_c('a',{on:{\"click\":function($event){return _vm.open('sourcer', majig)}}},[_vm._v(\" Source \")]),_vm._v(\" • \"),_c('a',{on:{\"click\":function($event){return _vm.open('abouter', majig)}}},[_vm._v(\" Meta \")])])])])}),_c('div',{staticClass:\"bodyer thin stack\"},[_c('div',{staticClass:\"horzer dim thin\",staticStyle:{\"font-size\":\"1em\"}},[_c('div',{staticClass:\"cntrer\"},[_vm._l((_vm.pages),function(page){return [(page)?[_vm._v(\" • \")]:_vm._e(),_c('router-link',{attrs:{\"to\":_vm.pageLink(page)}},[_vm._v(\" \"+_vm._s(page)+\" \")])]})],2)])])],2)])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"supstack\"},[_c('br')])}]\n\nexport { render, staticRenderFns }","<!-- Copyright (C) 2020 BenVacha/SoloMajig -->\n\n<template>\n<div class=\"body\">\n\n  <ParabodyRight\n    :views=\"views\"\n    :view=\"view\"\n    :viewed=\"viewed\"\n    @open=\"open\"\n    @goto=\"goto\" />\n\n  <div class=\"body\">\n\n    <div class=\"body\">\n    <div class=\"subbody\" id=\"subbody\">\n    <div class=\"bodyer thin stack\">\n      <div class=\"horzer dim thin\">\n        <div class=\"lefter\">\n          <span>{{status || $route.path}}</span>\n        </div>\n        <div class=\"rghter\">\n          <a @click=\"toggleFilter('published')\"\n            :class=\"classFilter('published')\">\n            Published</a> &bull;\n          <a @click=\"toggleFilter('updated')\"\n            :class=\"classFilter('updated')\">\n            Updated</a> &bull;\n          <span>\n            {{count || 0}}\n          </span>\n        </div>\n      </div>\n    </div>\n    <div class=\"bodyer thin stack\"\n      v-if=\"!majigs.length\">\n      <p>404 Not Found</p>\n    </div>\n    <div class=\"bodyer thin stack\"\n      v-for=\"majig in majigs\"\n      :key=\"majig.id\">\n      <div v-html=\"marked(majig.markdown)\"></div>\n      <div class=\"supstack\"><br /></div>\n      <div class=\"substack horzer dim\">\n        <div class=\"lefter thin\">\n          <span>\n            U &bull;\n            {{ majig.updated | datetime }}\n          </span>\n          <br />\n          <span>\n            P &bull;\n            {{ majig.published | datetime }}\n          </span>\n        </div>\n        <div class=\"rghter thin\">\n          <span>\n            {{ majig.tags }}\n          </span>\n          <br />\n          <a @click=\"gotoMajig(majig)\">\n            GoTo\n          </a> &bull;\n          <a @click=\"open('sourcer', majig)\">\n            Source\n          </a> &bull;\n          <a @click=\"open('abouter', majig)\">\n            Meta\n          </a>\n        </div>\n      </div>\n    </div>\n    <div class=\"bodyer thin stack\">\n      <div class=\"horzer dim thin\"\n        style=\"font-size:1em;\">\n        <div class=\"cntrer\">\n          <template\n            v-for=\"page in pages\">\n            <template\n              v-if=\"page\">\n              &bull;\n            </template>\n            <router-link\n              :to=\"pageLink(page)\">\n              {{page}}\n            </router-link>\n          </template>\n        </div>\n      </div>\n    </div>\n    </div>\n    </div>\n\n  </div>\n\n</div>\n</template>\n\n<script>\nimport Marked\n  from 'marked';\nimport ParabodyRight\n  from 'elements/paras/right.vue';\nimport Abouter\n  from 'elements/paras/abouter.vue';\nimport Sourcer\n  from 'elements/paras/sourcer.vue';\n/* */\nconst Renderer = new Marked.Renderer();\nconst Renderers = {\n  link: Renderer.link.bind(Renderer),\n};\nRenderer.link = (href, title, text) => {\n  if(href[0] === '/') {\n    href = '#' + href;\n  } else if(href[0] !== '#') {\n    href = '#/' + href;\n  }\n  return Renderers.link(href, title, text);\n};\n/* */\nexport default {\n  components: {\n    ParabodyRight,\n  },\n  filters: {\n    datetime: (value) => {\n      if(!value) return '000-00-00 00:00:00';\n      const when = new Date(value);\n      return when.toLocaleString('sv-SE');\n    },\n  },\n  props: {\n    flags: {\n      type: Array,\n      required: false,\n    },\n    page: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data () {\n    return {\n      status: '',\n      views: {\n        abouter: Abouter,\n        sourcer: Sourcer,\n      },\n      view: '',\n      viewed: null,\n      limit: 33,\n      skip: 0,\n    };\n  },\n  created () {\n    this.loadMajigs();\n  },\n  updated () {\n    let subbody = this.$el\n      .querySelector(\"#subbody\");\n    subbody.scrollTop = 0;\n  },\n  watch: {\n    '$route': 'loadMajigs',\n    'signed': 'loadMajigs',\n  },\n  computed: {\n    signed () {\n      return this.$store.getters[\n        'token/signed'];\n    },\n    filter () {\n      return this.$store.state.majigs.filter;\n    },\n    count () {\n      return this.$store.state.majigs.count;\n    },\n    pages () {\n      let pages = [];\n      const count = this.$store.state.majigs.count;\n      if(count <= this.limit) {\n        return pages;\n      }\n      for(let i = 0; i < count / this.limit; i++) {\n        pages.push(i);\n      }\n      return pages;\n    },\n    majigs () {\n      return this.$store.state.majigs.all || [];\n    },\n  },\n  methods: {\n    pageLink (page) {\n      if(!this.flags || !this.flags.length) {\n        return '///' + page;\n      }\n      return '//' + this.flags.join('/')\n        + '//' + page;\n    },\n    marked (markdown) {\n      return Marked(markdown\n        || '404 Not Found',\n        { renderer: Renderer });\n    },\n    goto (path) {\n      this.open(false);\n      this.$router.push(path).catch(err => {});\n    },\n    gotoMajig (majig) {\n      if(majig.path) {\n        this.$router.push({\n          path: majig.path\n        });\n      } else {\n        this.$router.push({\n          name: 'supmajig',\n          params: {\n            majigId: majig.id\n          }\n        });\n      }\n    },\n    open (view, viewed) {\n      if(view === false\n      || (view === this.view\n      && viewed === this.viewed)) {\n        this.view = '';\n        this.viewed = null;\n      } else if(view !== this.view) {\n        this.view = view;\n        this.viewed = viewed;\n      } else {\n        this.viewed = viewed;\n      }\n    },\n    toggleFilter (filter) {\n      this.status = 'sorting';\n      this.$store.dispatch('majigs/load', {\n        filter: this.filter == filter\n          ? '-' + filter : filter,\n        flags: this.flags,\n        limit: this.limit,\n        skip: this.skip\n          || this.page * this.limit,\n      }).then(() => {\n        this.status = '';\n      }).catch((errors) => {\n        this.status = errors[0].title;\n      });\n    },\n    classFilter (filter) {\n      if(this.filter == filter) {\n        return 'descend';\n      } else if(this.filter == '-' + filter) {\n        return 'ascend';\n      } else { return ''; }\n    },\n    loadMajigs () {\n      this.open(false);\n      this.status = 'loading';\n      this.$store.dispatch('majigs/load', {\n        filter: this.filter,\n        flags: this.flags,\n        limit: this.limit,\n        skip: this.skip\n          || this.page * this.limit,\n      }).then(() => {\n        this.status = '';\n      }).catch((errors) => {\n        this.status = errors[0].title;\n      });\n    },\n  },\n};\n</script>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./majigs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./majigs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./majigs.vue?vue&type=template&id=331487e3&\"\nimport script from \"./majigs.vue?vue&type=script&lang=js&\"\nexport * from \"./majigs.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}