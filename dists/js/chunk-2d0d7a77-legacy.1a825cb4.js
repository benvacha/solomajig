(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7a77"],{7877:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"body"},[i("ParabodyRight",{attrs:{views:t.views,view:t.view,viewed:t.viewed},on:{open:t.open,goto:t.goto}}),i("div",{staticClass:"body"},[i("div",{staticClass:"body"},[i("div",{staticClass:"subbody",attrs:{id:"subbody"}},[i("div",{staticClass:"bodyer thin stack"},[i("div",{staticClass:"horzer dim thin"},[i("div",{staticClass:"lefter"},[i("span",[t._v(t._s(t.status||t.$route.path))])]),i("div",{staticClass:"rghter"},[i("a",{class:t.classFilter("published"),on:{click:function(e){return t.toggleFilter("published")}}},[t._v(" Published")]),t._v(" • "),i("a",{class:t.classFilter("updated"),on:{click:function(e){return t.toggleFilter("updated")}}},[t._v(" Updated")]),t._v(" • "),i("span",[t._v(" "+t._s(t.count||0)+" ")])])])]),t.majigs.length?t._e():i("div",{staticClass:"bodyer thin stack"},[i("p",[t._v("404 Not Found")])]),t._l(t.majigs,(function(t){return i("SupMajig",{key:t.id,attrs:{majig:t}})})),t._m(0)],2)])])],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bodyer thin stack"},[i("div",{staticClass:"horzer dim thin",staticStyle:{"font-size":"1em"}},[i("div",{staticClass:"cntrer"})])])}],n=i("e0c1"),o=i.n(n),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bodyer thin stack"},[t.isMode("edit")||t.isMode("source")?t._e():i("div",{domProps:{innerHTML:t._s(t.markeddown)}}),t.isMode("edit")||t.isMode("source")?i("form",{staticClass:"editor",on:{submit:function(t){t.preventDefault()}}},[i("pre",[i("span",[t._v("\n      "+t._s(t.markdown)+"\n    ")]),i("br")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.markdown,expression:"markdown"}],attrs:{placeholder:"markdown"},domProps:{value:t.markdown},on:{input:function(e){e.target.composing||(t.markdown=e.target.value)}}})]):t._e(),t._m(0),i("div",{staticClass:"substack horzer dim"},[i("div",{staticClass:"lefter thin"},[i("span",[t._v("U • "+t._s(t._f("datetime")(t.majig.updated))+" ")]),i("br"),i("span",[t._v("P • "+t._s(t._f("datetime")(t.majig.published))+" ")]),i("br"),t.signed?i("span",[t._v("C • "+t._s(t._f("datetime")(t.majig.created))+" ")]):t._e()]),i("div",{staticClass:"rghter thin"},[t.signed?[t.isMode("edit")?[i("a",{on:{click:function(e){return t.toMode("proof")}}},[t._v(" Proof")]),t._v(" • "),i("a",{on:{click:function(e){return t.toMode("cancel")}}},[t._v(" Cancel")]),t._v(" • "),i("a",{on:{click:function(e){return t.toMode("save")}}},[t._v(" Save")])]:t.isMode("proof")?[i("a",{on:{click:function(e){return t.toMode("edit")}}},[t._v(" Edit")]),t._v(" • "),i("a",{on:{click:function(e){return t.toMode("cancel")}}},[t._v(" Cancel")]),t._v(" • "),i("a",{on:{click:function(e){return t.toMode("save")}}},[t._v(" Save")])]:t.majig.id?t.isMode("show")?[i("a",{on:{click:function(e){return t.toMode("edit")}}},[t._v(" Edit")]),t._v(" • "),t.majig.path?i("a",{on:{click:function(e){return t.toMode("move")}}},[t._v(" Move")]):t._e(),t.majig.path?t._e():i("a",{on:{click:function(e){return t.toMode("retag")}}},[t._v(" ReTag")]),i("br"),i("br"),t.majig.published?t._e():i("a",{on:{click:function(e){return t.publish()}}},[t._v(" Publish")]),t.majig.published?i("a",{on:{click:function(e){return t.unpublish()}}},[t._v(" UnPublish")]):t._e(),t._v(" • "),i("a",{on:{click:function(e){return t.toMode("delete")}}},[t._v(" Delete")])]:t.isMode("delete")?[i("a",{on:{click:function(e){return t.remove()}}},[t._v(" Delete")]),t._v(" • "),i("a",{on:{click:function(e){return t.toMode("cancel")}}},[t._v(" Cancel")])]:t.isMode("move")||t.isMode("retag")?[i("a",{on:{click:function(e){return t.toMode("cancel")}}},[t._v(" Cancel")]),i("br"),i("br"),i("span",[t._v("501 Not Implemented")])]:t._e():[i("a",{on:{click:function(e){return t.toMode("edit")}}},[t._v(" Edit")])]]:[t.majig.id?t.isMode("show")?[i("a",{on:{click:function(e){return t.toMode("source")}}},[t._v(" MarkDown")])]:t.isMode("source")?[i("a",{on:{click:function(e){return t.toMode("cancel")}}},[t._v(" MarkUp")])]:t._e():[i("span",[t._v("404 Not Found")])]]],2)])])},d=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"supstack"},[i("br")])}];const c=new o.a.Renderer,l={link:c.link.bind(c)};c.link=(t,e,i)=>("/"===t[0]?t="#"+t:"#"!==t[0]&&(t="#/"+t),l.link(t,e,i));var u={filters:{datetime:t=>{if(!t)return"000-00-00 00:00:00";const e=new Date(t);return e.toLocaleString("sv-SE")}},props:{majig:{type:Object,required:!0}},data(){return{status:"",mode:"show",markdown:""}},created(){this.loadMajig()},watch:{signed:"loadMajig"},computed:{signed(){return this.$store.getters["token/signed"]},markeddown(){return o()(this.markdown||"",{renderer:c})}},methods:{isMode(t){return this.mode===t},toMode(t){switch(t){case"cancel":this.markdown=this.majig.markdown||"",this.mode="show";break;case"save":this.saveMajig().then(()=>{this.mode="show"});break;default:this.mode=t;break}},loadMajig(){this.markdown=this.majig?this.majig.markdown:""},addMajig(){return this.status="adding",this.$store.dispatch("majig/add",{path:this.$route.path,markdown:this.markdown}).then(t=>{this.status=""}).catch(t=>{this.status=t[0].title})},updateMajig(){return this.status="updating",this.$store.dispatch("majig/update",{majigId:this.majig.id,markdown:this.markdown}).then(t=>{this.status=""}).catch(t=>{this.status=t[0].title})},saveMajig(){return this.status="saving",this.majig.id?this.updateMajig():this.addMajig()},move(){return this.status="moving",this.$store.dispatch("majig/update",{majigId:this.majig.id,path:this.majig.path}).then(t=>{this.$router.push(t.path||"/").catch(t=>{})}).catch(t=>{this.status=t[0].title})},retag(){return this.status="tagging",this.$store.dispatch("majig/update",{majigId:this.majig.id,tags:this.majig.tags}).then(t=>{this.status=""}).catch(t=>{this.status=t[0].title})},publish(){this.status="publishing",this.$store.dispatch("majig/update",{majigId:this.majig.id,published:new Date}).then(()=>{this.status=""}).catch(t=>{this.status=t[0].title})},unpublish(){this.status="unpublishing",this.$store.dispatch("majig/update",{majigId:this.majig.id,published:!1}).then(()=>{this.status=""}).catch(t=>{this.status=t[0].title})},remove(){this.status="removing",this.$store.dispatch("majig/remove",{majigId:this.majig.id}).then(()=>{this.status="",this.markdown="",this.toMode("show")}).catch(t=>{this.status=t[0].title})}}},h=u,v=i("2877"),p=Object(v["a"])(h,r,d,!1,null,null,null),m=p.exports,g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"parabody right",class:{open:t.opened,sticky:t.stuck}},[i("div",{staticClass:"prebody"},[i("div",{staticClass:"horzer"},[i("div",{staticClass:"rghter mask"},[t._v(" "+t._s(t.status)+" ")]),i("div",{staticClass:"lefter full"},[i("a",{staticClass:"material-icons full",on:{click:function(e){return t.$emit("open",!1)}}},[t._v(" chevron_right ")])])])]),i(t.views[t.view],{tag:"component",attrs:{viewed:t.viewed,stacked:t.stacked},on:{goto:t.goto,open:t.open,notify:t.notify}})],1)},_=[],f={components:{},props:{views:{type:Object,default:{}},view:{type:String,default:""},viewed:{type:Object,default:null},stacked:{type:Boolean,default:!1}},watch:{view(t,e){this.status="",this.opened=!!t}},data(){return{opened:!1,stuck:!1,status:""}},methods:{goto(t){this.$emit("goto",t)},open(t,e){this.$emit("open",t,e)},notify(t){this.status=t,this.$emit("notify",t)}}},k=f,b=Object(v["a"])(k,g,_,!1,null,null,null),w=b.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"body"},[i("div",{staticClass:"subbody"},[i("div",{staticClass:"bodyer para"},[i("h2",[t._v("About Majig")]),i("ul",[i("li",[i("div",[t._v(" tags: "),i("b"),i("span",[t._v(" "+t._s(t.viewed.tags)+" ")])])]),i("li",[i("div",[t._v(" published: "),i("b"),i("span",[t._v(" "+t._s(t._f("datetime")(t.viewed.published))+" ")])])]),i("li",[i("div",[t._v(" updated: "),i("b"),i("span",[t._v(" "+t._s(t._f("datetime")(t.viewed.updated))+" ")])])]),i("li",[i("div",[t._v(" created: "),i("b"),i("span",[t._v(" "+t._s(t._f("datetime")(t.viewed.created))+" ")])])])])])])])},M=[],y={filters:{datetime:t=>{if(!t)return"000-00-00 00:00:00";const e=new Date(t);return e.toLocaleString("sv-SE")}},props:{viewed:{type:Object,required:!0}}},C=y,$=Object(v["a"])(C,j,M,!1,null,null,null),S=$.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"body"},[i("div",{staticClass:"subbody"},[i("div",{staticClass:"bodyer para"},[i("h2",[t._v("Majig Source")]),i("pre",[t._v(t._s(t.viewed.markdown))])])])])},O=[],F={props:{viewed:{type:Object,required:!0}}},P=F,D=Object(v["a"])(P,E,O,!1,null,null,null),I=D.exports;const x=new o.a.Renderer,q={link:x.link.bind(x)};x.link=(t,e,i)=>("/"===t[0]?t="#"+t:"#"!==t[0]&&(t="#/"+t),q.link(t,e,i));var z={components:{ParabodyRight:w,SupMajig:m},filters:{datetime:t=>{if(!t)return"000-00-00 00:00:00";const e=new Date(t);return e.toLocaleString("sv-SE")}},props:{flags:{type:Array,required:!1}},data(){return{status:"",views:{abouter:S,sourcer:I},view:"",viewed:null,limit:100,skip:0,filter:"-updated"}},created(){this.loadMajigs()},updated(){let t=this.$el.querySelector("#subbody");t.scrollTop=0},watch:{$route:"loadMajigs",signed:"loadMajigs"},computed:{signed(){return this.$store.getters["token/signed"]},count(){return this.$store.state.majigs.count},majigs(){return this.$store.state.majigs.all||[]}},methods:{marked(t){return o()(t||"404 Not Found",{renderer:x})},goto(t){this.open(!1),this.$router.push(t).catch(t=>{})},gotoMajig(t){t.path?this.$router.push({path:t.path}):this.$router.push({name:"supmajig",params:{majigId:t.id}})},open(t,e){!1===t||t===this.view&&e===this.viewed?(this.view="",this.viewed=null):t!==this.view?(this.view=t,this.viewed=e):this.viewed=e},toggleFilter(t){this.status="sorting",this.filter=this.filter==t?"-"+t:t,this.$store.dispatch("majigs/load",{filter:this.filter,flags:this.flags,limit:this.limit,skip:this.skip}).then(()=>{this.status=""}).catch(t=>{this.status=t[0].title})},classFilter(t){return this.filter==t?"descend":this.filter=="-"+t?"ascend":""},loadMajigs(){this.open(!1),this.status="loading",this.$store.dispatch("majigs/load",{filter:this.filter,flags:this.flags,limit:this.limit,skip:this.skip}).then(()=>{this.status=""}).catch(t=>{this.status=t[0].title})}}},N=z,R=Object(v["a"])(N,s,a,!1,null,null,null);e["default"]=R.exports}}]);
//# sourceMappingURL=chunk-2d0d7a77-legacy.1a825cb4.js.map